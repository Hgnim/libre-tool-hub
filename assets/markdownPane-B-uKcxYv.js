import{d as y}from"./marked.esm-C0Rlrcoy.js";import{d as g,f as I,a as p,o as C,y as B,h as $,j as z,k as l,t as b,u as _,q as P}from"./github-markdown-DmvFWUqz.js";import{u as M}from"./index-Cx7Cp0vR.js";import"./app-Dyl6kHww.js";const r={x:null,y:null,width:null,height:null,zIndex:null,id:null,class:[],markdown:"",html:""};function A(i,s=!0){const o=x(i);let t="";return o.panes.forEach(e=>{const n=[];let a=!1;{let d=function(){c||(n.push("position:absolute;"),c=!0)},c=!1;e.x!==void 0&&(n.push(`left:${e.x}px;`),d(),a=!0),e.y!==void 0&&(n.push(`top:${e.y}px;`),d(),a=!0)}e.width!==void 0&&n.push(`width:${e.width}px;`),e.height!==void 0&&(n.push(`height:${e.height}px;`),a=!0),e.zIndex!==void 0&&(n.push(`z-index:${e.zIndex};`),a=!0);const u=(()=>{if(a){let c="";return n.forEach(d=>{c+=d}),` style="${c}"`}else return""})(),h=e.id!==void 0?` id="${e.id}"`:"",f=(()=>{let c="";return e.class.length>0?(e.class.forEach(d=>{c+=d+" "}),` class="${c}"`):""})();t+=`<div${h}${f}${u}>
${e.html}</div>
`}),s?`<div style="position:relative;overflow:scroll;width:100%;height:100%;">
${t}
</div>`:t}function x(i){const s={panes:[]},o=i.split(`
`);let t=null,e=[],n=[];function a(u){t.markdown=u.join(`
`).trim(),t.html=y.parse(t.markdown),s.panes.push(structuredClone(t)),t=null}for(const u of o){const h=u.trim();if(h.startsWith("---")){t?a(e):(t=W(h.slice(3).trim()),e=[]);continue}t?e.push(u):n.push(u)}return t&&a(e),t=structuredClone(r),a(n),s}function W(i){const s=structuredClone(r);{const o=i.trim();if(!o||o==="")return s}if(i.includes("="))for(const[,o,t]of i.matchAll(/(\w+(?:-\w+)?)=("[^"]*"|'[^']*'|[^\s"']+)/g)){let e=t;switch((e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))&&(e=e.slice(1,-1)),o){case"x":s.x=parseInt(e)??r.x;break;case"y":s.y=parseInt(e)??r.y;break;case"w":case"width":s.width=parseInt(e)??r.width;break;case"h":case"height":s.height=parseInt(e)??r.height;break;case"z":case"z-index":s.zIndex=parseInt(e)??r.zIndex;break;case"id":s.id=e??r.id;break;case"class":s.class=e.split(/\s+/).filter(Boolean)??r.class;break}}else{const o=i.trim().split(/\s+/);for(let t=0;t<o.length;t++)switch(t){case 0:s.x=parseInt(o[t])??r.x;break;case 1:s.y=parseInt(o[t])??r.y;break;case 2:s.width=parseInt(o[t])??r.width;break;case 3:s.height=parseInt(o[t])??r.height;break;case 4:s.zIndex=parseInt(o[t])??r.zIndex;break;case 5:{const e=o.slice(t);for(let n=0;n<e.length;n++)n===0?s.id=e[0]??r.id:e[n]&&s.class.push(e[n])}break}}return s}const E={parse:(i,s=!0)=>A(i,s),parseJson:i=>x(i)},J={class:"container"},T={class:"row"},H={class:"col-12 mb-2"},O={class:"input-group center"},S={class:"form-check form-switch"},U={class:"form-check-label"},j={class:"col-12 col-md-6 mb-2"},D={class:"input-group"},L=["placeholder"],N={class:"col-12 col-md-6 mb-2"},q={class:"col-12 mb-2"},R={class:"input-group center"},w=g({__name:"markdownPane",setup(i){const{lt:s,gt:o}=I();M(`${s("title")}${o("global.title")}`);const t=p(null),e=p(null),n=p(null);function a(){t.value&&n.value&&(n.value.innerHTML=E.parse(t.value.value,!1))}function u(){f.value&&f.value.checked&&a()}function h(){t.value&&e.value&&(e.value.style.height=t.value.style.height||`${t.value.offsetHeight}px`)}const f=p(null),c=p(null);function d(){f.value&&c.value&&(c.value.style.display=f.value.checked?"none":"")}let v=null;return C(()=>{v=new ResizeObserver(h),v.observe(t.value),h(),d()}),B(()=>{v&&v.disconnect()}),(V,m)=>(z(),$("div",J,[l("div",T,[l("div",H,[l("div",O,[l("div",S,[l("input",{ref_key:"autoConvSw",ref:f,onChange:d,class:"form-check-input",type:"checkbox",role:"switch",checked:""},null,544),l("label",U,b(_(s)("autoConv")),1)])])]),l("div",j,[l("div",D,[l("textarea",{ref_key:"inputBox",ref:t,id:"inputBox",class:"form-control",placeholder:_(s)("input"),onInput:u},null,40,L)])]),l("div",N,[l("div",{ref_key:"outputBox",ref:e,class:"form-control"},[l("div",{ref_key:"outputBox_mdp",ref:n,class:"mdp-cont markdown-body"},null,512)],512)]),l("div",q,[l("div",R,[l("button",{ref_key:"doConvBtn",ref:c,onClick:m[0]||(m[0]=F=>a()),type:"button",class:"btn btn-primary"},b(_(s)("convBtn")),513)])])])]))}});function k(i){const s=i;s.__i18n=s.__i18n||[],s.__i18n.push({locale:"",resource:{"zh-CN":{title:{t:0,b:{t:2,i:[{t:3}],s:"Markdown Pane预览工具-"}},autoConv:{t:0,b:{t:2,i:[{t:3}],s:"自动预览"}},input:{t:0,b:{t:2,i:[{t:3}],s:"输入"}},convBtn:{t:0,b:{t:2,i:[{t:3}],s:"预览"}}},"en-US":{title:{t:0,b:{t:2,i:[{t:3}],s:"Markdown Pane Preview Tool - "}},autoConv:{t:0,b:{t:2,i:[{t:3}],s:"Auto Preview"}},input:{t:0,b:{t:2,i:[{t:3}],s:"Input"}},convBtn:{t:0,b:{t:2,i:[{t:3}],s:"Preview"}}}}})}typeof k=="function"&&k(w);const Y=P(w,[["__scopeId","data-v-485f6963"]]);export{Y as default};
